{"version":3,"sources":["scripts/mn-select.class.js"],"names":["evaluate","value","isVariable","startsWith","isNaN","eval","e","MnSelect","self","_this","_ret","_classCallCheck","this","filterString","tabIndex","setMenu","setMobile","setSelected","setOptionEvents","setOpenEvents","setCloseEvents","setFormGetter","setValidation","_possibleConstructorReturn","tabindex","getAttribute","setAttribute","menu","document","createElement","style","transform","removeChild","querySelector","classList","add","Array","from","children","forEach","child","option","text","textContent","split","map","char","join","innerHTML","attributes","attr","name","parentNode","appendChild","insertBefore","firstChild","options","cloneNode","cancelButton","removeAttribute","mobile","body","viewValue","selectedOption","_this2","querySelectorAll","concat","addEventListener","event","target","close","focus","remove","nextFocusable","items","childNodes","filter","item","contains","index","indexOf","key","length","stopPropagation","preventDefault","focusOption","_this3","open","_this4","hasFilter","slice","undefined","clickOutside","closest","selectOption","form","element","Object","defineProperty","get","input","id","visibility","position","scrollTop","window","MnBackdrop","show","select","hide","type","elementFromPoint","clientX","clientY","_typeof","JSON","stringify","lastSelected","console","error","validate","changeEvent","CustomEvent","dispatchEvent","filterByRegex","search","RegExp","test","strReg","replace","reg","matches","match","matchIndex","matchValue","toLowerCase","hiddenOptions","chars","MnInput","customElements","define"],"mappings":"syBAsXA,QAASA,UAASC,OAChB,IACE,GAAMC,aAAcD,MAAME,WAAW,OAC/BF,MAAME,WAAW,OACjBF,MAAME,WAAW,OACjBF,MAAME,WAAW,OACjBF,MAAME,WAAW,MACR,SAAVF,OACU,UAAVA,OACAG,MAAMH,MAEX,OAAOC,YACDG,KAAAA,IAASJ,MAAT,KACAI,KAAAA,IAASJ,MAAT,KACN,MAAOK,GACP,MAAOL,wtBArYLM,SAAAA,SAAAA,iBACJ,QAAAA,UAAYC,MAAM,GAAAC,OAAAC,IAYhB,OAZgBC,iBAAAC,KAAAL,UAChBC,KAAAA,MAAAA,2BAAAA,MAAAA,SAAAA,WAAAA,OAAAA,eAAAA,WAAAA,KAAAA,KAAaA,OACbC,MAAKI,aAAe,GACpBJ,MAAKK,WACLL,MAAKM,UACLN,MAAKO,YACLP,MAAKQ,cACLR,MAAKS,kBACLT,MAAKU,gBACLV,MAAKW,iBACLX,MAAKY,gBACLZ,MAAKa,gBACLZ,KAAOF,KAAPe,2BAAAd,MAAAC,yGAIA,GAAMc,UAAWZ,KAAKa,aAAa,aAAe,GAClDb,MAAKc,aAAa,WAAYF,4CAI9B,GAAMG,MAAOC,SAASC,cAAc,OACpCF,MAAKG,MAAMC,UAAY,yBAEvBnB,KAAKoB,YAAYpB,KAAKqB,cAAc,UAEpCN,KAAKO,UAAUC,IAAI,WAEnBC,MACGC,KAAKzB,KAAK0B,UACVC,QAAQ,SAAAC,OAEP,GAAMC,QAASb,SAASC,cAAc,MACtCY,QAAOP,UAAUC,IAAI,mBAGrB,IAAMO,MAAOF,MACVG,YACAC,MAAM,IACNC,IAAI,SAAAC,MAAA,MAAA,sBAA8BA,KAA9B,YACJC,KAAK,GAERN,QAAOO,UAAYN,KACnBD,OAAOf,aAAa,WAAY,MAEhCU,MACGC,KAAKG,MAAMS,YACXV,QAAQ,SAAAW,MAAA,MAAQT,QAAOf,aAAawB,KAAKC,KAAMD,KAAKjD,SAEvDuC,MAAMY,WAAWpB,YAAYQ,OAC7Bb,KAAK0B,YAAYZ,UAGrB7B,KAAK0C,aAAa3B,KAAMf,KAAK2C,YAC7B3C,KAAKe,KAAOA,yCAIZ,GAAM6B,SAAU5B,SAASC,cAAc,OACjCF,KAAOf,KAAKqB,cAAc,QAAQwB,WAAU,GAC5CC,aAAe9B,SAASC,cAAc,SAE5C2B,SAAQtB,UAAUC,IAAI,oBACtBR,KAAKgC,gBAAgB,SACrBhC,KAAKgC,gBAAgB,SACrBD,aAAaf,YAAc,SAE3B/B,KAAKgD,OAASJ,QACdA,QAAQH,YAAY1B,MACpB6B,QAAQH,YAAYK,cAEpB9B,SAASiC,KAAKR,YAAYG,+CAI1B,GAAMM,WAAYlC,SAASC,cAAc,OACnCkC,eAAiBnD,KAAKa,aAAa,eACrCb,KAAKqB,cAAc,+BACnBrB,KAAKqB,cAAc,gCAChBrB,KAAKqB,cAAc,oBAE1B,IAAI8B,eAAgB,CAClB,GAAM9D,OAAQ8D,eAAetC,aAAa,UAAYsC,eAAepB,WACrE/B,MAAKX,MAAQA,MACbW,KAAKsB,UAAUC,IAAI,aACnB2B,UAAUnB,YAAcoB,eAAepB,gBAClC,IAAI/B,KAAKa,aAAa,SAAU,CACrC,GAAMxB,QAAQW,KAAKa,aAAa,QAChCb,MAAKX,MAAQA,MACb,IAAMwC,QAASb,SAASK,cAAT,4BAAmDhC,OAAnD,KAEXwC,UACFqB,UAAUnB,YAAcF,OAAOE,aAInC/B,KAAK0C,aAAaQ,UAAWlD,KAAK2C,sDAGlB,GAAAS,QAAApD,KACV4C,QAAUpB,MAAMC,KAAKzB,KAAKqD,iBAAiB,sBAC3CL,OAASxB,MAAMC,KAAKzB,KAAKgD,OAAOK,iBAAiB,qBAEvDT,SACGU,OAAON,QACPrB,QAAQ,SAAAE,QAAA,MAAUA,QAAO0B,iBAAiB,QAAS,SAAAC,OAClD,GAAMnE,OAAQmE,MAAMC,OAAO5C,aAAa,UAAY2C,MAAMC,OAAO1B,WACjEqB,QAAK/D,MAAQA,MACb+D,OAAKM,YAGTd,QACGjB,QAAQ,SAAAE,QAAA,MAAUA,QAAO0B,iBAAiB,YAAa,SAAAC,OACtDA,MAAMC,OAAOE,QACbH,MAAMC,OAAOnC,UAAUsC,OAAO,eAGlChB,QACGjB,QAAQ,SAAAE,QAAA,MAAUA,QAAO0B,iBAAiB,UAAW,SAAAC,OACpD,GAAIK,eAAAA,OAEEC,MAAQtC,MACXC,KAAK+B,MAAMC,OAAOjB,WAAWuB,YAC7BC,OAAO,SAAAC,MACN,OAAQA,KAAK3C,UAAU4C,SAAS,YAE9BC,MAAQL,MAAMM,QAAQZ,MAAMC,OAQlCI,eAAgBC,MANgB,cAAdN,MAAMa,KAAuBF,MAAQL,MAAMQ,OACzDH,MAAQ,EACM,YAAdX,MAAMa,KAAqBF,MAAQ,EACjCA,MAAQ,EACR,GAIY,cAAdX,MAAMa,KAAqC,YAAdb,MAAMa,MACrCb,MAAMC,OAAOnC,UAAUC,IAAI,WAC3BsC,cAAcF,QACdH,MAAMe,kBACNf,MAAMgB,sBAIZ5B,QACGjB,QAAQ,SAAAE,QAAA,MAAUA,QAAO0B,iBAAiB,UAAW,SAAAC,OACpD,GAAkB,UAAdA,MAAMa,IAAiB,CACzB,GAAMhF,OAAQmE,MAAMC,OAAO5C,aAAa,UAAY2C,MAAMC,OAAO1B,WACjEqB,QAAK/D,MAAQA,MACb+D,OAAKM,QAELF,MAAMe,uBAIZ3B,QACGjB,QAAQ,SAAAE,QAAA,MAAUA,QAAO0B,iBAAiB,UAAW,SAAAC,OACX,IAArBA,MAAMa,IAAIC,SAG5BlB,OAAKnD,cAAgBuD,MAAMa,IAC3BjB,OAAKY,OAASZ,OAAKnD,aACnBmD,OAAKqB,YAAYjB,oDAKT,GAAAkB,QAAA1E,IACdA,MAAKuD,iBAAiB,QAAS,SAAAC,OAC7BkB,OAAKC,OACLD,OAAKD,YAAYjB,SAEnBxD,KAAKuD,iBAAiB,UAAW,SAAAC,OAC/B,OAAQA,MAAMa,KACZ,IAAK,QACL,IAAK,IACHK,OAAKC,OACLD,OAAKD,YAAYjB,OACjBA,MAAMgB,6DAKG,GAAAI,QAAA5E,IACfA,MAAKuD,iBAAiB,QAAS,WAAA,MAAMqB,QAAKlB,UAC1C1D,KAAKgD,OAAO3B,cAAc,UAAUkC,iBAAiB,QAAS,WAAA,MAAMqB,QAAKlB,UACzE1D,KAAKgD,OAAOO,iBAAiB,QAAS,SAAAC,OAChCA,MAAMC,OAAOnC,UAAU4C,SAAS,qBAClCU,OAAKlB,UAIT1C,SAASuC,iBAAiB,UAAW,SAAAC,OACnC,GAAMqB,WAAYD,OAAK3E,YACN2E,QAAKtD,UAAU4C,SAAS,aAGrB,cAAdV,MAAMa,MACRO,OAAK3E,aAAe2E,OAAK3E,aAAa6E,MAAM,GAAI,GAChDF,OAAKZ,OAASY,OAAK3E,cAGH,QAAduD,MAAMa,KACRO,OAAKlB,QAGW,WAAdF,MAAMa,MACJQ,UACFD,OAAKZ,OAASe,OAEdH,OAAKlB,YAKb1C,SAASuC,iBAAiB,QAAS,SAAAC,OACjC,GAAMwB,eAAgBxB,MAAMC,OAAOwB,QAAQ,aACrCC,aAAe1B,MAAMC,OAAOnC,UAAU4C,SAAS,qBAEjDc,cAAgBE,eAClBN,OAAKlB,kDAMT,GAAMyB,MAAOnF,KAAKiF,QAAQ,QACpB1C,KAAOvC,KAAKa,aAAa,QACzBuE,QAAUpF,IAEZmF,OAAQ5C,MACV8C,OAAOC,eAAeH,KAAM5C,MAAOgD,IAAK,WAAA,MAAMH,oDAMhD,GADiBpF,KAAKa,aAAa,YACrB,CACZ,GAAM2E,OAAQxE,SAASC,cAAc,QACrCuE,OAAM1E,aAAa,WAAY,YAC/B0E,MAAM1E,aAAa,OAAQd,KAAKa,aAAa,SAAWb,KAAKyF,IAC7DD,MAAMtE,MAAMwE,WAAa,SACzBF,MAAMtE,MAAMyE,SAAW,WACvB3F,KAAKyC,YAAY+C,uCAiGnBxF,KAAK0D,QACL1D,KAAKe,KAAK6E,UAAY,EACtB5F,KAAKsB,UAAUC,IAAI,WACnBvB,KAAKgD,OAAO1B,UAAUC,IAAI,WAC1BP,SAASiC,KAAK3B,UAAUC,IAAI,qBAC5BsE,OAAOC,WAAWC,uCAIlB,GAAMC,QAAShF,SAASK,cAAc,oBAElC2E,UACFA,OAAO1E,UAAUsC,OAAO,WACxBoC,OAAOhC,OAASe,OAChBiB,OAAOhD,OAAO1B,UAAUsC,OAAO,WAC/B5C,SAASiC,KAAK3B,UAAUsC,OAAO,qBAC/BiC,OAAOC,WAAWG,4CAIVzC,OACV,GAAmB,UAAfA,MAAM0C,KAAkB,CAEXlF,SAASmF,iBAAiB3C,MAAM4C,QAAS5C,MAAM6C,SACvD1C,YACF,IAAmB,YAAfH,MAAM0C,KAAoB,CACnC,GAAMrE,SAAS7B,KAAKqB,cAAc,gCAC7BrB,KAAKqB,cAAc,iCACxBQ,SAAO8B,qCAzHDtE,OACRA,MAAyB,YAAjB,SAAOA,MAAP,YAAAiH,QAAOjH,QACXkH,KAAKC,UAAUnH,OACfA,KAEJ,IAAMwC,QAAS7B,KAAKqB,cAAL,4BAA+ChC,MAA/C,MACTmG,MAAQxF,KAAKqB,cAAc,QAEjC,IAAIQ,OAAQ,CACV,GAAMqB,WAAYlD,KAAKqB,cAAc,6BACrC6B,aACIA,UAAUnB,YAAcF,OAAOE,aAE/ByD,QACFA,MAAMnG,MAAQA,OAEhBW,KAAKsB,UAAUC,IAAI,YACnB,IAAMkF,cAAe5E,OAAOW,WAAWnB,cAAc,8BAEjDoF,eACFA,aAAa1D,gBAAgB,YAE/BlB,OAAOf,aAAa,WAAY,gBAEhC4F,SAAQC,MAAR,kEAC+BtH,MAD/B,kFAKFW,MAAK4G,UACL,IAAMC,aAAc,GAAIC,aAAY,UAAWzH,MAAAA,OAC/CW,MAAK+G,cAAcF,aACnB7G,KAAKc,aAAa,QAASzB,uBAI3B,MAAOD,UAASY,KAAKa,aAAa,WAAakE,oCAGtC1F,OA2CT,QAAS2H,eAAcC,OAAQ5H,OAE7B,MADY,IAAI6H,QAAOD,OAAOjF,MAAM,IAAIG,KAAK,MAAO,KACzCgF,KAAK9H,OA5ClB,GAAIA,MAAO,CACTW,KAAKsB,UAAUC,IAAI,YACnBvB,KAAKC,aAAeZ,KACJmC,OAAMC,KAAKzB,KAAKe,KAAKsC,iBAAiB,sBAC9C1B,QAAQ,SAAAE,QAGd,GAFoBmF,cAAc3H,MAAOwC,OAAOE,aAE/B,CACfF,OAAOP,UAAUsC,OAAO,SACxB,IAAMwD,QAAS/H,MACV2C,MAAM,IACNG,KAAK,MACLkF,QAAQ,iBAAkB,QACzBC,IAAM,GAAIJ,QAAOE,OAAQ,KACzBG,QAAU1F,OAAOE,YAAYyF,MAAMF,IAC3B9F,OAAMC,KAAKI,OAAOwB,iBAAiB,SAG9C1B,QAAQ,SAACO,KAAMiC,OACd,GAAMsD,YAAatD,OAASoD,QAAQpD,MAC9BuD,WAAarI,MAAMsI,cAAcV,OAAO/E,KAAKH,YAAY4F,gBAAkB,CAE7EF,aAAcC,WAChBxF,KAAKZ,UAAUC,IAAI,gBAEnBW,KAAKZ,UAAUsC,OAAO,kBAG5BvE,MAAM2C,MAAM,QAEZH,QAAOP,UAAUC,IAAI,gBAGpB,CACLvB,KAAKsB,UAAUsC,OAAO,YACtB5D,KAAKC,aAAe,EACpB,IAAM2H,eAAgBpG,MAAMC,KAAKzB,KAAKqD,iBAAiB,6BACjDwE,MAAQrG,MAAMC,KAAKzB,KAAKqD,iBAAiB,uCAC/CuE,eAAcjG,QAAQ,SAAAE,QAAA,MAAUA,QAAOP,UAAUsC,OAAO,YACxDiE,MAAMlG,QAAQ,SAAAO,MAAA,MAAQA,MAAKZ,UAAUsC,OAAO,mCAU9C,MAAO5D,MAAKC,cAAgB8E,qBAjVTc,OAAOiC,QAyY9BjC,QAAOkC,eAAeC,OAAO,YAAarI","file":"mn-select.js","sourcesContent":["class MnSelect extends window.MnInput {\n  constructor(self) {\n    self = super(self)\n    this.filterString = ''\n    this.tabIndex()\n    this.setMenu()\n    this.setMobile()\n    this.setSelected()\n    this.setOptionEvents()\n    this.setOpenEvents()\n    this.setCloseEvents()\n    this.setFormGetter()\n    this.setValidation()\n    return self\n  }\n\n  tabIndex() {\n    const tabindex = this.getAttribute('tabindex') || '0'\n    this.setAttribute('tabindex', tabindex)\n  }\n\n  setMenu() {\n    const menu = document.createElement('menu')\n    menu.style.transform = 'translate(-19px, -5px)'\n    // inherit from .mn-input\n    this.removeChild(this.querySelector('input'))\n\n    menu.classList.add('mn-card')\n\n    Array\n      .from(this.children)\n      .forEach(child => {\n        // fallback option, some browsers dont support tag option\n        const option = document.createElement('div')\n        option.classList.add('mn-select-option')\n\n        // wrap in a span\n        const text = child\n          .textContent\n          .split('')\n          .map(char => `<span class=\"char\">${char}</span>`)\n          .join('')\n\n        option.innerHTML = text\n        option.setAttribute('tabindex', '-1')\n\n        Array\n          .from(child.attributes)\n          .forEach(attr => option.setAttribute(attr.name, attr.value))\n\n        child.parentNode.removeChild(child)\n        menu.appendChild(option)\n      })\n\n    this.insertBefore(menu, this.firstChild)\n    this.menu = menu\n  }\n\n  setMobile() {\n    const options = document.createElement('div')\n    const menu = this.querySelector('menu').cloneNode(true)\n    const cancelButton = document.createElement('button')\n\n    options.classList.add('mn-select-mobile')\n    menu.removeAttribute('class')\n    menu.removeAttribute('style')\n    cancelButton.textContent = 'cancel'\n\n    this.mobile = options\n    options.appendChild(menu)\n    options.appendChild(cancelButton)\n\n    document.body.appendChild(options)\n  }\n\n  setSelected() {\n    const viewValue = document.createElement('div')\n    const selectedOption = this.getAttribute('placeholder')\n      ? this.querySelector('.mn-select-option[selected]')\n      : this.querySelector('.mn-select-option[selected]')\n        || this.querySelector('.mn-select-option')\n\n    if (selectedOption) {\n      const value = selectedOption.getAttribute('value') || selectedOption.textContent\n      this.value = value\n      this.classList.add('has-value')\n      viewValue.textContent = selectedOption.textContent\n    } else if (this.getAttribute('value')) {\n      const value = this.getAttribute('value')\n      this.value = value\n      const option = document.querySelector(`.mn-select-option[value='${value}']`)\n\n      if (option) {\n        viewValue.textContent = option.textContent\n      }\n    }\n\n    this.insertBefore(viewValue, this.firstChild)\n  }\n\n  setOptionEvents() {\n    const options = Array.from(this.querySelectorAll('.mn-select-option'))\n    const mobile = Array.from(this.mobile.querySelectorAll('.mn-select-option'))\n\n    options\n      .concat(mobile)\n      .forEach(option => option.addEventListener('click', event => {\n        const value = event.target.getAttribute('value') || event.target.textContent\n        this.value = value\n        this.close()\n      }))\n\n    options\n      .forEach(option => option.addEventListener('mousemove', event => {\n        event.target.focus()\n        event.target.classList.remove('keydown')\n      }))\n\n    options\n      .forEach(option => option.addEventListener('keydown', event => {\n        let nextFocusable\n\n        const items = Array\n          .from(event.target.parentNode.childNodes)\n          .filter(item => {\n            return !item.classList.contains('hidden')\n          })\n        const index = items.indexOf(event.target)\n\n        const nextIndex = event.key === 'ArrowDown' && index < items.length\n          ? index + 1\n          : event.key === 'ArrowUp' && index > 0\n            ? index - 1\n            : 0\n\n        nextFocusable = items[nextIndex]\n\n        if (event.key === 'ArrowDown' || event.key === 'ArrowUp') {\n          event.target.classList.add('keydown')\n          nextFocusable.focus()\n          event.stopPropagation()\n          event.preventDefault()\n        }\n      }))\n\n    options\n      .forEach(option => option.addEventListener('keydown', event => {\n        if (event.key === 'Enter') {\n          const value = event.target.getAttribute('value') || event.target.textContent\n          this.value = value\n          this.close()\n          // this.focus()\n          event.stopPropagation()\n        }\n      }))\n\n    options\n      .forEach(option => option.addEventListener('keydown', event => {\n        const isCharacter = event.key.length === 1\n\n        if (isCharacter) {\n          this.filterString += event.key\n          this.filter = this.filterString\n          this.focusOption(event)\n        }\n      }))\n  }\n\n  setOpenEvents() {\n    this.addEventListener('click', event => {\n      this.open()\n      this.focusOption(event)\n    })\n    this.addEventListener('keydown', event => {\n      switch (event.key) {\n        case 'Enter':\n        case ' ':\n          this.open()\n          this.focusOption(event)\n          event.preventDefault()\n      }\n    })\n  }\n\n  setCloseEvents() {\n    this.addEventListener('focus', () => this.close())\n    this.mobile.querySelector('button').addEventListener('click', () => this.close())\n    this.mobile.addEventListener('click', event => {\n      if (event.target.classList.contains('mn-select-mobile')) {\n        this.close()\n      }\n    })\n\n    document.addEventListener('keydown', event => {\n      const hasFilter = this.filterString\n      const isOpened = this.classList.contains('visible')\n\n      if (isOpened) {\n        if (event.key === 'Backspace') {\n          this.filterString = this.filterString.slice(0, -1)\n          this.filter = this.filterString\n        }\n\n        if (event.key === 'Tab') {\n          this.close()\n        }\n\n        if (event.key === 'Escape') {\n          if (hasFilter) {\n            this.filter = undefined\n          } else {\n            this.close()\n          }\n        }\n      }\n    })\n    document.addEventListener('click', event => {\n      const clickOutside = !event.target.closest('mn-select')\n      const selectOption = event.target.classList.contains('mn-select-option')\n\n      if (clickOutside || selectOption) {\n        this.close()\n      }\n    })\n  }\n\n  setFormGetter() {\n    const form = this.closest('form')\n    const name = this.getAttribute('name')\n    const element = this\n\n    if (form && name) {\n      Object.defineProperty(form, name, {get: () => element})\n    }\n  }\n\n  setValidation() {\n    const required = this.getAttribute('required')\n    if (required) {\n      const input = document.createElement('input')\n      input.setAttribute('required', 'required')\n      input.setAttribute('name', this.getAttribute('name') || this.id)\n      input.style.visibility = 'hidden'\n      input.style.position = 'absolute'\n      this.appendChild(input)\n    }\n  }\n\n  set value(value) {\n    value = typeof value === 'object'\n      ? JSON.stringify(value)\n      : value\n\n    const option = this.querySelector(`.mn-select-option[value='${value}']`)\n    const input = this.querySelector('input')\n\n    if (option) {\n      const viewValue = this.querySelector('div:not(.mn-select-option)')\n      viewValue\n        ? viewValue.textContent = option.textContent\n        : null\n      if (input) {\n        input.value = value\n      }\n      this.classList.add('has-value')\n      const lastSelected = option.parentNode.querySelector('.mn-select-option[selected]')\n\n      if (lastSelected) {\n        lastSelected.removeAttribute('selected')\n      }\n      option.setAttribute('selected', 'selected')\n    } else {\n      console.error(`MN-SELECT OPTION_UNDEFINED\n        You're trying set a value (${value}) to mn-select,\n        but there is no option with this value to be displayed`)\n    }\n\n    this.validate()\n    const changeEvent = new CustomEvent('change', {value})\n    this.dispatchEvent(changeEvent)\n    this.setAttribute('value', value)\n  }\n\n  get value() {\n    return evaluate(this.getAttribute('value')) || undefined\n  }\n\n  set filter(value) {\n    if (value) {\n      this.classList.add('filtered')\n      this.filterString = value\n      const options = Array.from(this.menu.querySelectorAll('.mn-select-option'))\n      options.forEach(option => {\n        const matchOption = filterByRegex(value, option.textContent)\n\n        if (matchOption) {\n          option.classList.remove('hidden')\n          const strReg = value\n              .split('')\n              .join('.*')\n              .replace(/(\\w(?:\\.\\*)?)/g, '($1)')\n          const reg = new RegExp(strReg, 'i')\n          const matches = option.textContent.match(reg)\n          const chars = Array.from(option.querySelectorAll('span'))\n\n          chars\n            .forEach((char, index) => {\n              const matchIndex = index >= matches.index\n              const matchValue = value.toLowerCase().search(char.textContent.toLowerCase()) >= 0\n\n              if (matchIndex && matchValue) {\n                char.classList.add('filter-match')\n              } else {\n                char.classList.remove('filter-match')\n              }\n            })\n          value.split('')\n        } else {\n          option.classList.add('hidden')\n        }\n      })\n    } else {\n      this.classList.remove('filtered')\n      this.filterString = ''\n      const hiddenOptions = Array.from(this.querySelectorAll('.mn-select-option.hidden'))\n      const chars = Array.from(this.querySelectorAll('.mn-select-option span.filter-match'))\n      hiddenOptions.forEach(option => option.classList.remove('hidden'))\n      chars.forEach(char => char.classList.remove('filter-match'))\n    }\n\n    function filterByRegex(search, value) {\n      const reg = new RegExp(search.split('').join('.*'), 'i')\n      return reg.test(value)\n    }\n  }\n\n  get filter() {\n    return this.filterString || undefined\n  }\n\n  open() {\n    this.close()\n    this.menu.scrollTop = 0\n    this.classList.add('visible')\n    this.mobile.classList.add('visible')\n    document.body.classList.add('mn-select-visible')\n    window.MnBackdrop.show()\n  }\n\n  close() {\n    const select = document.querySelector('mn-select.visible')\n\n    if (select) {\n      select.classList.remove('visible')\n      select.filter = undefined\n      select.mobile.classList.remove('visible')\n      document.body.classList.remove('mn-select-visible')\n      window.MnBackdrop.hide()\n    }\n  }\n\n  focusOption(event) {\n    if (event.type === 'click') {\n      // focus on option behind mouse\n      const option = document.elementFromPoint(event.clientX, event.clientY)\n      option.focus()\n    } else if (event.type === 'keydown') {\n      const option = this.querySelector('.mn-select-option[selected]')\n        || this.querySelector('.mn-select-option:not(.hidden)')\n      option.focus()\n    }\n  }\n}\n\nfunction evaluate(value) {\n  try {\n    const isVariable = !value.startsWith('[')\n      && !value.startsWith('{')\n      && !value.startsWith('\\'')\n      && !value.startsWith('\"')\n      && !value.startsWith('`')\n      && value !== 'true'\n      && value !== 'false'\n      && isNaN(value)\n\n    return isVariable\n        ? eval(`'${value}'`) // convert to string\n        : eval(`(${value})`) // evaluate\n  } catch (e) {\n    return value\n  }\n}\n\nwindow.customElements.define('mn-select', MnSelect)\n\n"]}