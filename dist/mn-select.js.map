{"version":3,"sources":["scripts/mn-select.class.js"],"names":["MnSelect","self","_this","_ret","_classCallCheck","this","setOpenEvents","setCloseEvents","setMenu","setSelected","_possibleConstructorReturn","selected","document","createElement","selectedOption","querySelector","textContent","insertBefore","firstChild","menu","classList","add","Array","from","children","forEach","child","appendChild","open","addEventListener","close","body","esc","event","keyCode","isOpened","contains","select","remove","stopPropagation","clickOutside","target","tagName","HTMLElement","customElements","define"],"mappings":"sxCAAMA,SAAAA,SAAAA,cACJ,QAAAA,UAAYC,MAAM,GAAAC,OAAAC,IAMhB,OANgBC,iBAAAC,KAAAL,UAChBC,KAAAA,MAAAA,2BAAAA,MAAAA,SAAAA,WAAAA,OAAAA,eAAAA,WAAAA,KAAAA,KAAaA,OACbC,MAAKI,gBACLJ,MAAKK,iBACLL,MAAKM,UACLN,MAAKO,cACLN,KAAOF,KAAPS,2BAAAR,MAAAC,yGAIA,GAAMQ,UAAWC,SAASC,cAAc,OAClCC,eAAiBT,KAAKU,cAAc,qBAAuBV,KAAKU,cAAc,SACpFJ,UAASK,YAAcF,eAAeE,YACtCX,KAAKY,aAAaN,SAAUN,KAAKa,8CAIjC,GAAMC,MAAOP,SAASC,cAAc,OAEpCM,MAAKC,UAAUC,IAAI,WAEnBC,MACGC,KAAKlB,KAAKmB,UACVC,QAAQ,SAAAC,OAAA,MAASP,MAAKQ,YAAYD,SAErCrB,KAAKY,aAAaE,KAAMd,KAAKa,oDAI7B,GAAMU,MAAOvB,KAAKuB,IAClBvB,MAAKwB,iBAAiB,QAASD,+CAI/B,GAAME,OAAQzB,KAAKyB,KACnBlB,UAASmB,KAAKF,iBAAiB,QAASC,OACxClB,SAASiB,iBAAiB,QAAS,WACjC,GAAMG,KAAwB,KAAlBC,MAAMC,QACdC,SAAWvB,SAASmB,KAAKX,UAAUgB,SAAS,oBAEhD,IAAIJ,KAAOG,SAAU,CACnB,GAAME,QAASzB,SAASG,cAAc,oBACtCH,UAASmB,KAAKX,UAAUkB,OAAO,qBAC/BD,OAAOjB,UAAUkB,OAAO,6CAM5BjC,KAAKe,UAAUC,IAAI,WACnBT,SAASmB,KAAKX,UAAUC,IAAI,mDAGxBY,OACJA,MAAMM,iBACN,IAAMC,cAAwC,SAAzBP,MAAMQ,OAAOC,QAC5BL,OAASzB,SAASG,cAAc,oBAElCyB,eAAgBH,SAClBzB,SAASmB,KAAKX,UAAUkB,OAAO,qBAC/BD,OAAOjB,UAAUkB,OAAO,0BA7DPK,YAkEvBC,gBAAeC,OAAO,YAAa7C","file":"mn-select.js","sourcesContent":["class MnSelect extends HTMLElement {\n  constructor(self) {\n    self = super(self)\n    this.setOpenEvents()\n    this.setCloseEvents()\n    this.setMenu()\n    this.setSelected()\n    return self\n  }\n\n  setSelected() {\n    const selected = document.createElement('div')\n    const selectedOption = this.querySelector('option[selected]') || this.querySelector('option')\n    selected.textContent = selectedOption.textContent\n    this.insertBefore(selected, this.firstChild)\n  }\n\n  setMenu() {\n    const menu = document.createElement('menu')\n\n    menu.classList.add('mn-card')\n\n    Array\n      .from(this.children)\n      .forEach(child => menu.appendChild(child))\n\n    this.insertBefore(menu, this.firstChild)\n  }\n\n  setOpenEvents() {\n    const open = this.open\n    this.addEventListener('click', open)\n  }\n\n  setCloseEvents() {\n    const close = this.close\n    document.body.addEventListener('click', close)\n    document.addEventListener('keyup', () => {\n      const esc = event.keyCode === 27\n      let isOpened = document.body.classList.contains('mn-select-visible')\n\n      if (esc && isOpened) {\n        const select = document.querySelector('mn-select.visible')\n        document.body.classList.remove('mn-select-visible')\n        select.classList.remove('visible')\n      }\n    })\n  }\n\n  open() {\n    this.classList.add('visible')\n    document.body.classList.add('mn-select-visible')\n  }\n\n  close(event) {\n    event.stopPropagation()\n    const clickOutside = event.target.tagName === 'BODY'\n    const select = document.querySelector('mn-select.visible')\n\n    if (clickOutside && select) {\n      document.body.classList.remove('mn-select-visible')\n      select.classList.remove('visible')\n    }\n  }\n}\n\ncustomElements.define('mn-select', MnSelect)\n"]}