{"version":3,"sources":["scripts/mn-select.class.js"],"names":["MnSelect","self","_this","_ret","_classCallCheck","this","setOpenEvents","setCloseEvents","setMenu","setSelected","setOptionEvents","_possibleConstructorReturn","selected","document","createElement","selectedOption","querySelector","textContent","insertBefore","firstChild","menu","style","transform","classList","add","Array","from","children","forEach","child","appendChild","open","addEventListener","_this2","options","querySelectorAll","option","event","setSelectedOption","target","setValue","value","close","_this3","body","esc","keyCode","isOpened","contains","viewValue","setViewValue","console","error","text","childNodes","lastSelected","parentNode","removeAttribute","setAttribute","tagName","select","stopPropagation","clickOutside","remove","HTMLElement","customElements","define"],"mappings":"sxCAAMA,SAAAA,SAAAA,cACJ,QAAAA,UAAYC,MAAM,GAAAC,OAAAC,IAOhB,OAPgBC,iBAAAC,KAAAL,UAChBC,KAAAA,MAAAA,2BAAAA,MAAAA,SAAAA,WAAAA,OAAAA,eAAAA,WAAAA,KAAAA,KAAaA,OACbC,MAAKI,gBACLJ,MAAKK,iBACLL,MAAKM,UACLN,MAAKO,cACLP,MAAKQ,kBACLP,KAAOF,KAAPU,2BAAAT,MAAAC,yGAIA,GAAMS,UAAWC,SAASC,cAAc,OAClCC,eAAiBV,KAAKW,cAAc,qBAAuBX,KAAKW,cAAc,SACpFJ,UAASK,YAAcF,eAAeE,YACtCZ,KAAKa,aAAaN,SAAUP,KAAKc,8CAIjC,GAAMC,MAAOP,SAASC,cAAc,OACpCM,MAAKC,MAAMC,UAAY,yBAEvBF,KAAKG,UAAUC,IAAI,WAEnBC,MACGC,KAAKrB,KAAKsB,UACVC,QAAQ,SAAAC,OAAA,MAAST,MAAKU,YAAYD,SAErCxB,KAAKa,aAAaE,KAAMf,KAAKc,oDAI7B,GAAMY,MAAO1B,KAAK0B,IAClB1B,MAAK2B,iBAAiB,QAASD,gDAGf,GAAAE,QAAA5B,KACV6B,QAAU7B,KAAK8B,iBAAiB,SAEtCV,OACGC,KAAKQ,SACLN,QAAQ,SAAAQ,QAAA,MAAUA,QAAOJ,iBAAiB,QAAS,SAAAK,OAClDJ,OAAKK,kBAAkBD,MAAME,QAC7BN,OAAKO,SAASH,MAAME,OAAOE,OAC3BR,OAAKS,qDAIM,GAAAC,QAAAtC,IACfQ,UAAS+B,KAAKZ,iBAAiB,QAAS3B,KAAKqC,OAC7C7B,SAASmB,iBAAiB,QAAS,WACjC,GAAMa,KAAwB,KAAlBR,MAAMS,QACdC,SAAWlC,SAAS+B,KAAKrB,UAAUyB,SAAS,oBAE5CH,MAAOE,UACTJ,OAAKD,2CAKFD,OACP,GAAML,QAAS/B,KAAKW,cAAL,iBAAoCyB,MAApC,MACTQ,UAAYb,OACdA,OAAOnB,YACP,IAEAgC,WACF5C,KAAK6C,aAAaD,WAElBE,QAAQC,MAAR,kEAC+BX,MAD/B,wHAMSY,MACXhD,KAAKiD,WAAW,GAAGrC,YAAcoC,+CAGjBd,QAGhB,GAAMgB,cAAehB,OAAOiB,WAAWxC,cAAc,mBAEjDuC,eACFA,aAAaE,gBAAgB,YAE/BlB,OAAOmB,aAAa,WAAY,yCAG7BrB,OACH,QAAIA,OAAkC,WAAzBA,MAAME,OAAOoB,WAG1BtD,KAAKkB,UAAUC,IAAI,eACnBX,UAAS+B,KAAKrB,UAAUC,IAAI,oDAGxBa,OACJ,GAAMuB,QAAS/C,SAASG,cAAc,oBACtC,IAAIqB,OAASuB,OAAQ,CACnBvB,MAAMwB,iBACN,IAAMC,cAAwC,SAAzBzB,MAAME,OAAOoB,OAE9BG,eAAgBF,SAClB/C,SAAS+B,KAAKrB,UAAUwC,OAAO,qBAC/BH,OAAOrC,UAAUwC,OAAO,gBAEjBH,UACT/C,SAAS+B,KAAKrB,UAAUwC,OAAO,qBAC/BH,OAAOrC,UAAUwC,OAAO,0BA9GPC,YAmHvBC,gBAAeC,OAAO,YAAalE","file":"mn-select.js","sourcesContent":["class MnSelect extends HTMLElement {\n  constructor(self) {\n    self = super(self)\n    this.setOpenEvents()\n    this.setCloseEvents()\n    this.setMenu()\n    this.setSelected()\n    this.setOptionEvents()\n    return self\n  }\n\n  setSelected() {\n    const selected = document.createElement('div')\n    const selectedOption = this.querySelector('option[selected]') || this.querySelector('option')\n    selected.textContent = selectedOption.textContent\n    this.insertBefore(selected, this.firstChild)\n  }\n\n  setMenu() {\n    const menu = document.createElement('menu')\n    menu.style.transform = 'translate(-14px, -8px)'\n\n    menu.classList.add('mn-card')\n\n    Array\n      .from(this.children)\n      .forEach(child => menu.appendChild(child))\n\n    this.insertBefore(menu, this.firstChild)\n  }\n\n  setOpenEvents() {\n    const open = this.open\n    this.addEventListener('click', open)\n  }\n\n  setOptionEvents() {\n    const options = this.querySelectorAll('option')\n\n    Array\n      .from(options)\n      .forEach(option => option.addEventListener('click', event => {\n        this.setSelectedOption(event.target)\n        this.setValue(event.target.value)\n        this.close()\n      }))\n  }\n\n  setCloseEvents() {\n    document.body.addEventListener('click', this.close)\n    document.addEventListener('keyup', () => {\n      const esc = event.keyCode === 27\n      let isOpened = document.body.classList.contains('mn-select-visible')\n\n      if (esc && isOpened) {\n        this.close()\n      }\n    })\n  }\n\n  setValue(value) {\n    const option = this.querySelector(`option[value=\"${value}\"]`)\n    const viewValue = option\n      ? option.textContent\n      : null\n\n    if (viewValue) {\n      this.setViewValue(viewValue)\n    } else {\n      console.error(`MN-SELECT OPTION_UNDEFINED\n        You're trying set a value (${value}) to mn-select,\n        but there is no option with this value to be displayed`)\n    }\n  }\n\n  setViewValue(text) {\n    this.childNodes[0].textContent = text\n  }\n\n  setSelectedOption(target) {\n    // const value = target.value || target.textContent\n    // target.parentNode.setAttribute('value', value)\n    const lastSelected = target.parentNode.querySelector('option[selected]')\n\n    if (lastSelected) {\n      lastSelected.removeAttribute('selected')\n    }\n    target.setAttribute('selected', 'selected')\n  }\n\n  open(event) {\n    if (event && event.target.tagName === 'OPTION') {\n      return false\n    }\n    this.classList.add('visible')\n    document.body.classList.add('mn-select-visible')\n  }\n\n  close(event) {\n    const select = document.querySelector('mn-select.visible')\n    if (event && select) {\n      event.stopPropagation()\n      const clickOutside = event.target.tagName === 'BODY'\n\n      if (clickOutside && select) {\n        document.body.classList.remove('mn-select-visible')\n        select.classList.remove('visible')\n      }\n    } else if (select) {\n      document.body.classList.remove('mn-select-visible')\n      select.classList.remove('visible')\n    }\n  }\n}\n\ncustomElements.define('mn-select', MnSelect)\n"]}